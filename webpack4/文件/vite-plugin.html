<!DOCTYPE html> <html lang=en><!--
 Page saved with SingleFile 
 url: http://zhufengpeixun.com/strong/html/103.16.vite.plugin.html 
 saved date: Mon Aug 15 2022 22:13:17 GMT+0800 (中国标准时间)
--><meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1">
<title>珠峰架构师成长计划</title>
<style>html,body,div,span,h2,h3,h4,p,pre,a,code,ul,li{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-family:inherit;font-size:100%;vertical-align:baseline}body{background:#fff}ul{list-style:none}a:hover{text-decoration:underline}.markdown-body{padding:30px 35px 30px 35px;word-wrap:break-word;font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.4em;color:#333}@media screen and (max-width:479px){.markdown-body{padding:30px 10px 30px 10px}}.markdown-body>*:first-child{margin-top:0!important}.markdown-body h2,.markdown-body h3,.markdown-body h4{position:relative;margin-top:1em;margin-bottom:16px;font-weight:bold;line-height:1.4}.markdown-body h2{padding-bottom:.3em;font-size:1.75em;line-height:1.225;border-bottom:1px dashed #dedede}.markdown-body p,.markdown-body pre{margin-top:0;margin-bottom:16px}.markdown-body pre{padding:16px;overflow:auto;background-color:#e5e5e5;border-radius:3px;word-break:break-all;word-wrap:break-word;font:16px Consolas,"Liberation Mono",Menlo,Courier,monospace}.markdown-body pre code{background-color:transparent;color:inherit;line-height:16px;display:block;font-size:14px}.markdown-body pre code:before,.markdown-body pre code:after,.markdown-body pre tt:before,.markdown-body pre tt:after{letter-spacing:0;content:""}.markdown-body code{padding:0;padding-bottom:2px;margin:0 3px;vertical-align:top;border-radius:4px;padding-left:3px;padding-right:3px}.markdown-body code:before,.markdown-body code:after,.markdown-body tt:before,.markdown-body tt:after{content:" ";vertical-align:text-top}.hljs-comment{color:#969896;font-size:90%}.hljs-keyword,.hljs-subst{color:#a71d5d;font-weight:bold}.hljs-number{color:#008080}.hljs-string{color:#183691}.hljs-title{color:#900;font-weight:bold}.hljs-subst{font-weight:normal}.hljs-tag{color:#000080;font-weight:normal}.hljs-name{color:#008080}.hljs-regexp{color:#009926}.hljs-built_in{color:#0086b3}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}body,html{height:100%}.logo{float:left;padding:10px 20px 0 0;font-size:24px;color:#61dafb}.nav{background:#20232a;z-index:2;height:80px;line-height:61px;border-bottom:1px solid #c4c4c4;padding:0 0 0 20px;position:fixed;width:100%}@media screen and (max-width:479px){.nav{height:initial;position:initial}}.nav ul{list-style:none;position:relative;display:block;overflow-x:auto;height:100%}@media screen and (max-width:479px){.nav ul{display:-ms-inline-flexbox;display:inline-flex;width:100%;overflow:auto}}.nav ul li{float:left;line-height:40px}.nav ul li a{color:#fff;text-decoration:none;padding:0 15px}.nav ul li:hover a{color:#61dafb}.nav ul li.active a{color:#61dafb;height:40px}.nav ul:after{content:"";clear:both;display:block}.warpper{width:100%;padding:80px 0 0 0;height:100%;overflow:auto}@media screen and (max-width:479px){.warpper{padding-top:0}}.warpper .markdown-body{height:100%}.warpper .markdown-body{margin-left:220px;overflow:auto}@media screen and (max-width:479px){.warpper .markdown-body{margin-left:0}}.warpper .page-toc{height:calc(100% - 80px);position:fixed;width:220px;border-right:1px solid #bbb;box-shadow:0 0 20px #ccc;background:#f7f7f7;padding:10px;overflow-y:auto;overflow-x:hidden;font-family:"Lucida Grande","Lucida Sans Unicode",Helvetica,Arial,sans-serif!important}@media screen and (max-width:479px){.warpper .page-toc{display:none}}.warpper .page-toc ul{list-style-type:none;margin:0}.warpper .page-toc ul a{display:block;padding:3px 0;color:#151515;text-decoration:none;font-weight:700;line-height:16px;font-size:14px}.warpper .page-toc ul a:hover{text-decoration:underline}.warpper .page-toc ul li{padding-left:3px;line-height:25px;text-align:left}.warpper .page-toc ul ul{margin:0 0 0 10px;padding:0 0 0 9px}.warpper .page-toc ul ul li a{font-size:90%;font-weight:normal;border-bottom:0;position:relative}::-webkit-scrollbar-track-piece{background-color:#fff;-webkit-border-radius:0}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-thumb{height:50px;background-color:#999;-webkit-border-radius:4px;outline:2px solid #fff;outline-offset:-2px;border:2px solid #fff}::-webkit-scrollbar-thumb:hover{height:50px;background-color:#9f9f9f;-webkit-border-radius:4px}/*!
 * Bootstrap v3.4.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 *//*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}a{background-color:transparent}a:active,a:hover{outline:0}/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}h2,h3,h4{font-family:inherit;color:inherit}h3{font-size:24px}h4{font-size:18px}p{margin:0 0 10px}ul{margin-top:0;margin-bottom:10px}ul ul{margin-bottom:0}code,pre{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}pre{display:block;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;border:1px solid #ccc}pre code{white-space:pre-wrap}.nav{padding-left:0;margin-bottom:0;list-style:none}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.modal-open{overflow:hidden}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before,.btn-toolbar:after,.btn-toolbar:before,.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.dl-horizontal dd:after,.dl-horizontal dd:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before,.modal-footer:after,.modal-footer:before,.modal-header:after,.modal-header:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before,.pager:after,.pager:before,.panel-body:after,.panel-body:before,.row:after,.row:before{display:table;content:" "}.btn-group-vertical>.btn-group:after,.btn-toolbar:after,.clearfix:after,.container-fluid:after,.container:after,.dl-horizontal dd:after,.form-horizontal .form-group:after,.modal-footer:after,.modal-header:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after,.pager:after,.panel-body:after,.row:after{clear:both}@-ms-viewport{width:device-width}.sf-hidden{display:none!important}</style><link rel=canonical href=http://zhufengpeixun.com/strong/html/103.16.vite.plugin.html><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
<body class=modal-open>
<div class=nav>
 <div class=logo>
 
 珠峰架构师成长计划
 
 </div>
 <ul><li><a href=http://zhufengpeixun.com/strong/index.html>0.api</a><li><a href=http://zhufengpeixun.com/strong/html/0.Async.html>0.Async</a><li><a href=http://zhufengpeixun.com/strong/html/0.module.html>0.module</a><li><a href=http://zhufengpeixun.com/strong/html/1.ES2015.html>1.ES2015</a><li><a href=http://zhufengpeixun.com/strong/html/2.Promise.html>2.Promise</a><li><a href=http://zhufengpeixun.com/strong/html/3.Node.html>3.Node</a><li><a href=http://zhufengpeixun.com/strong/html/4.NodeInstall.html>4.NodeInstall</a><li><a href=http://zhufengpeixun.com/strong/html/5.REPL.html>5.REPL</a><li><a href=http://zhufengpeixun.com/strong/html/6.NodeCore.html>6.NodeCore</a><li><a href=http://zhufengpeixun.com/strong/html/7.module&amp;NPM.html>7.module&amp;NPM</a><li><a href=http://zhufengpeixun.com/strong/html/8.Encoding.html>8.Encoding</a><li><a href=http://zhufengpeixun.com/strong/html/9.Buffer.html>9.Buffer</a><li><a href=http://zhufengpeixun.com/strong/html/10.fs.html>10.fs</a><li><a href=http://zhufengpeixun.com/strong/html/11.Stream-1.html>11.Stream-1</a><li><a href=http://zhufengpeixun.com/strong/html/11.Stream-2.html>11.Stream-2</a><li><a href=http://zhufengpeixun.com/strong/html/11.Stream-3.html>11.Stream-3</a><li><a href=http://zhufengpeixun.com/strong/html/11.Stream-4.html>11.Stream-4</a><li><a href=http://zhufengpeixun.com/strong/html/12-Network-2.html>12-Network-2</a><li><a href=http://zhufengpeixun.com/strong/html/12.NetWork-3.html>12.NetWork-3</a><li><a href=http://zhufengpeixun.com/strong/html/12.Network-1.html>12.Network-1</a><li><a href=http://zhufengpeixun.com/strong/html/13.tcp.html>13.tcp</a><li><a href=http://zhufengpeixun.com/strong/html/14.http-1.html>14.http-1</a><li><a href=http://zhufengpeixun.com/strong/html/14.http-2.html>14.http-2</a><li><a href=http://zhufengpeixun.com/strong/html/15.compress.html>15.compress</a><li><a href=http://zhufengpeixun.com/strong/html/16.crypto.html>16.crypto</a><li><a href=http://zhufengpeixun.com/strong/html/17.process.html>17.process</a><li><a href=http://zhufengpeixun.com/strong/html/18.yargs.html>18.yargs</a><li><a href=http://zhufengpeixun.com/strong/html/19.cache.html>19.cache</a><li><a href=http://zhufengpeixun.com/strong/html/20.action.html>20.action</a><li><a href=http://zhufengpeixun.com/strong/html/21.https.html>21.https</a><li><a href=http://zhufengpeixun.com/strong/html/22.cookie.html>22.cookie</a><li><a href=http://zhufengpeixun.com/strong/html/23.session.html>23.session</a><li><a href=http://zhufengpeixun.com/strong/html/24.express-1.html>24.express-1</a><li><a href=http://zhufengpeixun.com/strong/html/24.express-2.html>24.express-2</a><li><a href=http://zhufengpeixun.com/strong/html/24.express-3.html>24.express-3</a><li><a href=http://zhufengpeixun.com/strong/html/24.express-4.html>24.express-4</a><li><a href=http://zhufengpeixun.com/strong/html/25.koa-1.html>25.koa-1</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-1-basic.html>26.webpack-1-basic</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-2-optimize.html>26.webpack-2-optimize</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-3-file.html>26.webpack-3-file</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-4.tapable.html>26.webpack-4.tapable</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-5-AST.html>26.webpack-5-AST</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-6-sources.html>26.webpack-6-sources</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-7-loader.html>26.webpack-7-loader</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-8-plugin.html>26.webpack-8-plugin</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-9-hand.html>26.webpack-9-hand</a><li><a href=http://zhufengpeixun.com/strong/html/26.webpack-10-prepare.html>26.webpack-10-prepare</a><li><a href=http://zhufengpeixun.com/strong/html/28.redux.html>28.redux</a><li><a href=http://zhufengpeixun.com/strong/html/28.redux-jwt-back.html>28.redux-jwt-back</a><li><a href=http://zhufengpeixun.com/strong/html/28.redux-jwt-front.html>28.redux-jwt-front</a><li><a href=http://zhufengpeixun.com/strong/html/29.mongodb-1.html>29.mongodb-1</a><li><a href=http://zhufengpeixun.com/strong/html/29.mongodb-2.html>29.mongodb-2</a><li><a href=http://zhufengpeixun.com/strong/html/29.mongodb-3.html>29.mongodb-3</a><li><a href=http://zhufengpeixun.com/strong/html/29.mongodb-4.html>29.mongodb-4</a><li><a href=http://zhufengpeixun.com/strong/html/29.mongodb-5.html>29.mongodb-5</a><li><a href=http://zhufengpeixun.com/strong/html/29.mongodb-6.html>29.mongodb-6</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-1-mysql.html>30.cms-1-mysql</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-2-mysql.html>30.cms-2-mysql</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-3-mysql.html>30.cms-3-mysql</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-4-nunjucks.html>30.cms-4-nunjucks</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-5-mock.html>30.cms-5-mock</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-6-egg.html>30.cms-6-egg</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-7-api.html>30.cms-7-api</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-8-roadhog.html>30.cms-8-roadhog</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-9-yaml.html>30.cms-9-yaml</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-10-umi.html>30.cms-10-umi</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-12-dva.html>30.cms-12-dva</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-13-dva-ant.html>30.cms-13-dva-ant</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-14-front.html>30.cms-14-front</a><li><a href=http://zhufengpeixun.com/strong/html/30.cms-15-deploy.html>30.cms-15-deploy</a><li><a href=http://zhufengpeixun.com/strong/html/31.dva.html>31.dva</a><li><a href=http://zhufengpeixun.com/strong/html/31.cms-13-dva-antdesign.html>31.cms-13-dva-antdesign</a><li><a href=http://zhufengpeixun.com/strong/html/33.redis.html>33.redis</a><li><a href=http://zhufengpeixun.com/strong/html/34.unittest.html>34.unittest</a><li><a href=http://zhufengpeixun.com/strong/html/35.jwt.html>35.jwt</a><li><a href=http://zhufengpeixun.com/strong/html/36.websocket-1.html>36.websocket-1</a><li><a href=http://zhufengpeixun.com/strong/html/36.websocket-2.html>36.websocket-2</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat-api-1.html>38.chat-api-1</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat-api-2.html>38.chat-api-2</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat-3.html>38.chat-3</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat-api-3.html>38.chat-api-3</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat.html>38.chat</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat2.html>38.chat2</a><li><a href=http://zhufengpeixun.com/strong/html/38.chat2.html>38.chat2</a><li><a href=http://zhufengpeixun.com/strong/html/39.crawl-0.html>39.crawl-0</a><li><a href=http://zhufengpeixun.com/strong/html/39.crawl-1.html>39.crawl-1</a><li><a href=http://zhufengpeixun.com/strong/html/39.crawl-2.html>39.crawl-2</a><li><a href=http://zhufengpeixun.com/strong/html/40.deploy.html>40.deploy</a><li><a href=http://zhufengpeixun.com/strong/html/41.safe.html>41.safe</a><li><a href=http://zhufengpeixun.com/strong/html/42.test.html>42.test</a><li><a href=http://zhufengpeixun.com/strong/html/43.nginx.html>43.nginx</a><li><a href=http://zhufengpeixun.com/strong/html/44.enzyme.html>44.enzyme</a><li><a href=http://zhufengpeixun.com/strong/html/45.docker.html>45.docker</a><li><a href=http://zhufengpeixun.com/strong/html/46.elastic.html>46.elastic</a><li><a href=http://zhufengpeixun.com/strong/html/47.oauth.html>47.oauth</a><li><a href=http://zhufengpeixun.com/strong/html/48.wxpay.html>48.wxpay</a><li><a href=http://zhufengpeixun.com/strong/html/index.html>index</a><li><a href=http://zhufengpeixun.com/strong/html/52.UML.html>52.UML</a><li><a href=http://zhufengpeixun.com/strong/html/53.design.html>53.design</a><li><a href=http://zhufengpeixun.com/strong/html/index.html>index</a><li><a href=http://zhufengpeixun.com/strong/html/54.linux.html>54.linux</a><li><a href=http://zhufengpeixun.com/strong/html/57.ts.html>57.ts</a><li><a href=http://zhufengpeixun.com/strong/html/56.react-ssr.html>56.react-ssr</a><li><a href=http://zhufengpeixun.com/strong/html/58.ts_react.html>58.ts_react</a><li><a href=http://zhufengpeixun.com/strong/html/59.ketang.html>59.ketang</a><li><a href=http://zhufengpeixun.com/strong/html/59.ketang2.html>59.ketang2</a><li><a href=http://zhufengpeixun.com/strong/html/61.1.devops-linux.html>61.1.devops-linux</a><li><a href=http://zhufengpeixun.com/strong/html/61.2.devops-vi.html>61.2.devops-vi</a><li><a href=http://zhufengpeixun.com/strong/html/61.3.devops-user.html>61.3.devops-user</a><li><a href=http://zhufengpeixun.com/strong/html/61.4.devops-auth.html>61.4.devops-auth</a><li><a href=http://zhufengpeixun.com/strong/html/61.5.devops-shell.html>61.5.devops-shell</a><li><a href=http://zhufengpeixun.com/strong/html/61.6.devops-install.html>61.6.devops-install</a><li><a href=http://zhufengpeixun.com/strong/html/61.7.devops-system.html>61.7.devops-system</a><li><a href=http://zhufengpeixun.com/strong/html/61.8.devops-service.html>61.8.devops-service</a><li><a href=http://zhufengpeixun.com/strong/html/61.9.devops-network.html>61.9.devops-network</a><li><a href=http://zhufengpeixun.com/strong/html/61.10.devops-nginx.html>61.10.devops-nginx</a><li><a href=http://zhufengpeixun.com/strong/html/61.11.devops-docker.html>61.11.devops-docker</a><li><a href=http://zhufengpeixun.com/strong/html/61.12.devops-jekins.html>61.12.devops-jekins</a><li><a href=http://zhufengpeixun.com/strong/html/61.13.devops-groovy.html>61.13.devops-groovy</a><li><a href=http://zhufengpeixun.com/strong/html/61.14.devops-php.html>61.14.devops-php</a><li><a href=http://zhufengpeixun.com/strong/html/61.15.devops-java.html>61.15.devops-java</a><li><a href=http://zhufengpeixun.com/strong/html/61.16.devops-node.html>61.16.devops-node</a><li><a href=http://zhufengpeixun.com/strong/html/61.17.devops-k8s.html>61.17.devops-k8s</a><li><a href=http://zhufengpeixun.com/strong/html/62.1.react-basic.html>62.1.react-basic</a><li><a href=http://zhufengpeixun.com/strong/html/62.2.react-state.html>62.2.react-state</a><li><a href=http://zhufengpeixun.com/strong/html/62.3.react-high.html>62.3.react-high</a><li><a href=http://zhufengpeixun.com/strong/html/62.4.react-optimize.html>62.4.react-optimize</a><li><a href=http://zhufengpeixun.com/strong/html/62.5.react-hooks.html>62.5.react-hooks</a><li><a href=http://zhufengpeixun.com/strong/html/62.6.react-immutable.html>62.6.react-immutable</a><li><a href=http://zhufengpeixun.com/strong/html/62.7.react-mobx.html>62.7.react-mobx</a><li><a href=http://zhufengpeixun.com/strong/html/62.8.react-source.html>62.8.react-source</a><li><a href=http://zhufengpeixun.com/strong/html/63.1.redux.html>63.1.redux</a><li><a href=http://zhufengpeixun.com/strong/html/63.2.redux-middleware.html>63.2.redux-middleware</a><li><a href=http://zhufengpeixun.com/strong/html/63.3.redux-hooks.html>63.3.redux-hooks</a><li><a href=http://zhufengpeixun.com/strong/html/63.4.redux-saga.html>63.4.redux-saga</a><li><a href=http://zhufengpeixun.com/strong/html/63.5.redux-saga-hand.html>63.5.redux-saga-hand</a><li><a href=http://zhufengpeixun.com/strong/html/64.1.router.html>64.1.router</a><li><a href=http://zhufengpeixun.com/strong/html/64.2.router-connected.html>64.2.router-connected</a><li><a href=http://zhufengpeixun.com/strong/html/65.1.typescript.html>65.1.typescript</a><li><a href=http://zhufengpeixun.com/strong/html/65.2.typescript.html>65.2.typescript</a><li><a href=http://zhufengpeixun.com/strong/html/65.3.typescript.html>65.3.typescript</a><li><a href=http://zhufengpeixun.com/strong/html/65.4.antd.html>65.4.antd</a><li><a href=http://zhufengpeixun.com/strong/html/65.4.definition.html>65.4.definition</a><li><a href=http://zhufengpeixun.com/strong/html/66-1.vue-base.html>66-1.vue-base</a><li><a href=http://zhufengpeixun.com/strong/html/66-2.vue-component.html>66-2.vue-component</a><li><a href=http://zhufengpeixun.com/strong/html/66-3.vue-cli3.0.html>66-3.vue-cli3.0</a><li><a href=http://zhufengpeixun.com/strong/html/66-4.$message%E7%BB%84%E4%BB%B6.html>66-4.$message组件</a><li><a href=http://zhufengpeixun.com/strong/html/66-5.Form%E7%BB%84%E4%BB%B6.html>66-5.Form组件</a><li><a href=http://zhufengpeixun.com/strong/html/66-6.tree.html>66-6.tree</a><li><a href=http://zhufengpeixun.com/strong/html/66-7.vue-router-apply.html>66-7.vue-router-apply</a><li><a href=http://zhufengpeixun.com/strong/html/66-8.axios-apply.html>66-8.axios-apply</a><li><a href=http://zhufengpeixun.com/strong/html/66-9.vuex-apply.html>66-9.vuex-apply</a><li><a href=http://zhufengpeixun.com/strong/html/66-10.jwt-vue.html>66-10.jwt-vue</a><li><a href=http://zhufengpeixun.com/strong/html/66-11.vue-ssr.html>66-11.vue-ssr</a><li><a href=http://zhufengpeixun.com/strong/html/66-12.nuxt-apply.html>66-12.nuxt-apply</a><li><a href=http://zhufengpeixun.com/strong/html/66-13.pwa.html>66-13.pwa</a><li><a href=http://zhufengpeixun.com/strong/html/66-14.vue%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html>66-14.vue单元测试</a><li><a href=http://zhufengpeixun.com/strong/html/66-15.%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C.html>66-15.权限校验</a><li><a href=http://zhufengpeixun.com/strong/html/67-1-network.html>67-1-network</a><li><a href=http://zhufengpeixun.com/strong/html/68-2-wireshark.html>68-2-wireshark</a><li><a href=http://zhufengpeixun.com/strong/html/7.npm2.html>7.npm2</a><li><a href=http://zhufengpeixun.com/strong/html/69-hooks.html>69-hooks</a><li><a href=http://zhufengpeixun.com/strong/html/70-deploy.html>70-deploy</a><li><a href=http://zhufengpeixun.com/strong/html/71-hmr.html>71-hmr</a><li><a href=http://zhufengpeixun.com/strong/html/72.deploy.html>72.deploy</a><li><a href=http://zhufengpeixun.com/strong/html/73.import.html>73.import</a><li><a href=http://zhufengpeixun.com/strong/html/74.mobile.html>74.mobile</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-1.%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90.html>75.webpack-1.文件分析</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-2.loader.html>75.webpack-2.loader</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-3.%E6%BA%90%E7%A0%81%E6%B5%81%E7%A8%8B.html>75.webpack-3.源码流程</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-4.tapable.html>75.webpack-4.tapable</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-5.prepare.html>75.webpack-5.prepare</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-6.resolve.html>75.webpack-6.resolve</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-7.loader.html>75.webpack-7.loader</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-8.module.html>75.webpack-8.module</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-9.chunk.html>75.webpack-9.chunk</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-10.asset.html>75.webpack-10.asset</a><li><a href=http://zhufengpeixun.com/strong/html/75.webpack-11.%E5%AE%9E%E7%8E%B0.html>75.webpack-11.实现</a><li><a href=http://zhufengpeixun.com/strong/html/76.react_optimize.html>76.react_optimize</a><li><a href=http://zhufengpeixun.com/strong/html/77.ts_ketang_back.html>77.ts_ketang_back</a><li><a href=http://zhufengpeixun.com/strong/html/77.ts_ketang_front.html>77.ts_ketang_front</a><li><a href=http://zhufengpeixun.com/strong/html/78.vue-domdiff.html>78.vue-domdiff</a><li><a href=http://zhufengpeixun.com/strong/html/79.grammar.html>79.grammar</a><li><a href=http://zhufengpeixun.com/strong/html/80.tree.html>80.tree</a><li><a href=http://zhufengpeixun.com/strong/html/81.axios.html>81.axios</a><li><a href=http://zhufengpeixun.com/strong/html/82.1.react.html>82.1.react</a><li><a href=http://zhufengpeixun.com/strong/html/82.2.react-high.html>82.2.react-high</a><li><a href=http://zhufengpeixun.com/strong/html/82.3.react-router.html>82.3.react-router</a><li><a href=http://zhufengpeixun.com/strong/html/82.4.redux.html>82.4.redux</a><li><a href=http://zhufengpeixun.com/strong/html/82.5.redux_middleware.html>82.5.redux_middleware</a><li><a href=http://zhufengpeixun.com/strong/html/82.6.connected.html>82.6.connected</a><li><a href=http://zhufengpeixun.com/strong/html/82.7.saga.html>82.7.saga</a><li><a href=http://zhufengpeixun.com/strong/html/82.8.dva.html>82.8.dva</a><li><a href=http://zhufengpeixun.com/strong/html/82.8.dva-source.html>82.8.dva-source</a><li><a href=http://zhufengpeixun.com/strong/html/82.9.roadhog.html>82.9.roadhog</a><li><a href=http://zhufengpeixun.com/strong/html/82.10.umi.html>82.10.umi</a><li><a href=http://zhufengpeixun.com/strong/html/82.11.antdesign.html>82.11.antdesign</a><li><a href=http://zhufengpeixun.com/strong/html/82.12.ketang-front.html>82.12.ketang-front</a><li><a href=http://zhufengpeixun.com/strong/html/82.12.ketang-back.html>82.12.ketang-back</a><li><a href=http://zhufengpeixun.com/strong/html/83.upload.html>83.upload</a><li><a href=http://zhufengpeixun.com/strong/html/84.graphql.html>84.graphql</a><li><a href=http://zhufengpeixun.com/strong/html/85.antpro.html>85.antpro</a><li><a href=http://zhufengpeixun.com/strong/html/86.1.uml.html>86.1.uml</a><li><a href=http://zhufengpeixun.com/strong/html/86.2.design.html>86.2.design</a><li><a href=http://zhufengpeixun.com/strong/html/87.postcss.html>87.postcss</a><li><a href=http://zhufengpeixun.com/strong/html/88.react16-1.html>88.react16-1</a><li><a href=http://zhufengpeixun.com/strong/html/89.nextjs.html>89.nextjs</a><li><a href=http://zhufengpeixun.com/strong/html/90.react-test.html>90.react-test</a><li><a href=http://zhufengpeixun.com/strong/html/91.react-ts.html>91.react-ts</a><li><a href=http://zhufengpeixun.com/strong/html/92.rbac.html>92.rbac</a><li><a href=http://zhufengpeixun.com/strong/html/93.tsnode.html>93.tsnode</a><li><a href=http://zhufengpeixun.com/strong/html/94.1.JavaScript.html>94.1.JavaScript</a><li><a href=http://zhufengpeixun.com/strong/html/94.2.JavaScript.html>94.2.JavaScript</a><li><a href=http://zhufengpeixun.com/strong/html/94.3.MODULE.html>94.3.MODULE</a><li><a href=http://zhufengpeixun.com/strong/html/94.4.EventLoop.html>94.4.EventLoop</a><li><a href=http://zhufengpeixun.com/strong/html/94.5.%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html>94.5.文件上传</a><li><a href=http://zhufengpeixun.com/strong/html/94.6.https.html>94.6.https</a><li><a href=http://zhufengpeixun.com/strong/html/94.7.%20nginx.html>94.7. nginx</a><li><a href=http://zhufengpeixun.com/strong/html/95.1.%20react.html>95.1. react</a><li><a href=http://zhufengpeixun.com/strong/html/95.2.react.html>95.2.react</a><li><a href=http://zhufengpeixun.com/strong/html/96.1.react16.html>96.1.react16</a><li><a href=http://zhufengpeixun.com/strong/html/96.2.fiber.html>96.2.fiber</a><li><a href=http://zhufengpeixun.com/strong/html/96.3.fiber.html>96.3.fiber</a><li><a href=http://zhufengpeixun.com/strong/html/97.serverless.html>97.serverless</a><li><a href=http://zhufengpeixun.com/strong/html/98.websocket.html>98.websocket</a><li><a href=http://zhufengpeixun.com/strong/html/100.1.react-basic.html>100.1.react-basic</a><li><a href=http://zhufengpeixun.com/strong/html/101.1.monitor.html>101.1.monitor</a><li><a href=http://zhufengpeixun.com/strong/html/101.2.monitor.html>101.2.monitor</a><li><a href=http://zhufengpeixun.com/strong/html/102.java.html>102.java</a><li><a href=http://zhufengpeixun.com/strong/html/103.1.webpack-usage.html>103.1.webpack-usage</a><li><a href=http://zhufengpeixun.com/strong/html/103.2.webpack-bundle.html>103.2.webpack-bundle</a><li><a href=http://zhufengpeixun.com/strong/html/103.3.webpack-ast.html>103.3.webpack-ast</a><li><a href=http://zhufengpeixun.com/strong/html/103.4.webpack-flow.html>103.4.webpack-flow</a><li><a href=http://zhufengpeixun.com/strong/html/103.5.webpack-loader.html>103.5.webpack-loader</a><li><a href=http://zhufengpeixun.com/strong/html/103.6.webpack-tapable.html>103.6.webpack-tapable</a><li><a href=http://zhufengpeixun.com/strong/html/103.7.webpack-plugin.html>103.7.webpack-plugin</a><li><a href=http://zhufengpeixun.com/strong/html/103.8.webpack-optimize1.html>103.8.webpack-optimize1</a><li><a href=http://zhufengpeixun.com/strong/html/103.9.webpack-optimize2.html>103.9.webpack-optimize2</a><li><a href=http://zhufengpeixun.com/strong/html/103.10.webpack-hand.html>103.10.webpack-hand</a><li><a href=http://zhufengpeixun.com/strong/html/103.11.webpack-hmr.html>103.11.webpack-hmr</a><li><a href=http://zhufengpeixun.com/strong/html/103.11.webpack5.html>103.11.webpack5</a><li><a href=http://zhufengpeixun.com/strong/html/103.13.splitChunks.html>103.13.splitChunks</a><li><a href=http://zhufengpeixun.com/strong/html/103.14.webpack-sourcemap.html>103.14.webpack-sourcemap</a><li><a href=http://zhufengpeixun.com/strong/html/103.15.webpack-compiler1.html>103.15.webpack-compiler1</a><li><a href=http://zhufengpeixun.com/strong/html/103.15.webpack-compiler2.html>103.15.webpack-compiler2</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.rollup.1.html>103.16.rollup.1</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.rollup.2.html>103.16.rollup.2</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.rollup.3.html>103.16.rollup.3</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.vite.basic.html>103.16.vite.basic</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.vite.source.html>103.16.vite.source</a><li class=active><a href=http://zhufengpeixun.com/strong/html/103.16.vite.plugin.html>103.16.vite.plugin</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.vite.1.html>103.16.vite.1</a><li><a href=http://zhufengpeixun.com/strong/html/103.16.vite.2.html>103.16.vite.2</a><li><a href=http://zhufengpeixun.com/strong/html/103.17.polyfill.html>103.17.polyfill</a><li><a href=http://zhufengpeixun.com/strong/html/104.1.binary.html>104.1.binary</a><li><a href=http://zhufengpeixun.com/strong/html/104.2.binary.html>104.2.binary</a><li><a href=http://zhufengpeixun.com/strong/html/105.skeleton.html>105.skeleton</a><li><a href=http://zhufengpeixun.com/strong/html/106.1.react.html>106.1.react</a><li><a href=http://zhufengpeixun.com/strong/html/106.2.react_hooks.html>106.2.react_hooks</a><li><a href=http://zhufengpeixun.com/strong/html/106.3.react_router.html>106.3.react_router</a><li><a href=http://zhufengpeixun.com/strong/html/106.4.redux.html>106.4.redux</a><li><a href=http://zhufengpeixun.com/strong/html/106.5.redux_middleware.html>106.5.redux_middleware</a><li><a href=http://zhufengpeixun.com/strong/html/106.6.connected-react-router.html>106.6.connected-react-router</a><li><a href=http://zhufengpeixun.com/strong/html/106.6.redux-first-history.html>106.6.redux-first-history</a><li><a href=http://zhufengpeixun.com/strong/html/106.7.redux-saga.html>106.7.redux-saga</a><li><a href=http://zhufengpeixun.com/strong/html/106.8.dva.html>106.8.dva</a><li><a href=http://zhufengpeixun.com/strong/html/106.9.umi.html>106.9.umi</a><li><a href=http://zhufengpeixun.com/strong/html/106.10.ketang.html>106.10.ketang</a><li><a href=http://zhufengpeixun.com/strong/html/106.11.antdesign.html>106.11.antdesign</a><li><a href=http://zhufengpeixun.com/strong/html/106.12.antpro.html>106.12.antpro</a><li><a href=http://zhufengpeixun.com/strong/html/106.13.router-6.html>106.13.router-6</a><li><a href=http://zhufengpeixun.com/strong/html/106.14.ssr.html>106.14.ssr</a><li><a href=http://zhufengpeixun.com/strong/html/106.15.nextjs.html>106.15.nextjs</a><li><a href=http://zhufengpeixun.com/strong/html/106.16.1.cms.html>106.16.1.cms</a><li><a href=http://zhufengpeixun.com/strong/html/106.16.2.cms.html>106.16.2.cms</a><li><a href=http://zhufengpeixun.com/strong/html/106.16.3.cms.html>106.16.3.cms</a><li><a href=http://zhufengpeixun.com/strong/html/106.16.4.cms.html>106.16.4.cms</a><li><a href=http://zhufengpeixun.com/strong/html/106.16.mobx.html>106.16.mobx</a><li><a href=http://zhufengpeixun.com/strong/html/106.17.fomily.html>106.17.fomily</a><li><a href=http://zhufengpeixun.com/strong/html/107.fiber.html>107.fiber</a><li><a href=http://zhufengpeixun.com/strong/html/108.http.html>108.http</a><li><a href=http://zhufengpeixun.com/strong/html/109.1.webpack_usage.html>109.1.webpack_usage</a><li><a href=http://zhufengpeixun.com/strong/html/109.2.webpack_source.html>109.2.webpack_source</a><li><a href=http://zhufengpeixun.com/strong/html/109.3.dll.html>109.3.dll</a><li><a href=http://zhufengpeixun.com/strong/html/110.nest.js.html>110.nest.js</a><li><a href=http://zhufengpeixun.com/strong/html/111.xstate.html>111.xstate</a><li><a href=http://zhufengpeixun.com/strong/html/112.Form.html>112.Form</a><li><a href=http://zhufengpeixun.com/strong/html/113.redux-saga.html>113.redux-saga</a><li><a href=http://zhufengpeixun.com/strong/html/114.react+typescript.html>114.react+typescript</a><li><a href=http://zhufengpeixun.com/strong/html/115.immer.html>115.immer</a><li><a href=http://zhufengpeixun.com/strong/html/116.pro5.html>116.pro5</a><li><a href=http://zhufengpeixun.com/strong/html/117.css-loader.html>117.css-loader</a><li><a href=http://zhufengpeixun.com/strong/html/118.1.umi-core.html>118.1.umi-core</a><li><a href=http://zhufengpeixun.com/strong/html/119.2.module-federation.html>119.2.module-federation</a><li><a href=http://zhufengpeixun.com/strong/html/119.1.module-federation.html>119.1.module-federation</a><li><a href=http://zhufengpeixun.com/strong/html/120.create-react-app.html>120.create-react-app</a><li><a href=http://zhufengpeixun.com/strong/html/121.react-scripts.html>121.react-scripts</a><li><a href=http://zhufengpeixun.com/strong/html/122.react-optimize.html>122.react-optimize</a><li><a href=http://zhufengpeixun.com/strong/html/123.jsx-runtime.html>123.jsx-runtime</a><li><a href=http://zhufengpeixun.com/strong/html/124.next.js.html>124.next.js</a><li><a href=http://zhufengpeixun.com/strong/html/125.1.linux.html>125.1.linux</a><li><a href=http://zhufengpeixun.com/strong/html/125.2.linux-vi.html>125.2.linux-vi</a><li><a href=http://zhufengpeixun.com/strong/html/125.3.linux-user.html>125.3.linux-user</a><li><a href=http://zhufengpeixun.com/strong/html/125.4.linux-auth.html>125.4.linux-auth</a><li><a href=http://zhufengpeixun.com/strong/html/125.5.linux-shell.html>125.5.linux-shell</a><li><a href=http://zhufengpeixun.com/strong/html/125.6.linux-install.html>125.6.linux-install</a><li><a href=http://zhufengpeixun.com/strong/html/125.7.linux-system.html>125.7.linux-system</a><li><a href=http://zhufengpeixun.com/strong/html/125.8.linux-service.html>125.8.linux-service</a><li><a href=http://zhufengpeixun.com/strong/html/125.9.linux-network.html>125.9.linux-network</a><li><a href=http://zhufengpeixun.com/strong/html/125.10.nginx.html>125.10.nginx</a><li><a href=http://zhufengpeixun.com/strong/html/125.11.docker.html>125.11.docker</a><li><a href=http://zhufengpeixun.com/strong/html/125.12.ci.html>125.12.ci</a><li><a href=http://zhufengpeixun.com/strong/html/125.13.k8s.html>125.13.k8s</a><li><a href=http://zhufengpeixun.com/strong/html/125.14.k8s.html>125.14.k8s</a><li><a href=http://zhufengpeixun.com/strong/html/125.15.k8s.html>125.15.k8s</a><li><a href=http://zhufengpeixun.com/strong/html/125.16.k8s.html>125.16.k8s</a><li><a href=http://zhufengpeixun.com/strong/html/126.11.react-1.html>126.11.react-1</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-2.html>126.12.react-2</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-3.html>126.12.react-3</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-4.html>126.12.react-4</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-5.html>126.12.react-5</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-6.html>126.12.react-6</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-7.html>126.12.react-7</a><li><a href=http://zhufengpeixun.com/strong/html/126.12.react-8.html>126.12.react-8</a><li><a href=http://zhufengpeixun.com/strong/html/127.frontend.html>127.frontend</a><li><a href=http://zhufengpeixun.com/strong/html/128.rollup.html>128.rollup</a><li><a href=http://zhufengpeixun.com/strong/html/129.px2rem-loader.html>129.px2rem-loader</a><li><a href=http://zhufengpeixun.com/strong/html/130.health.html>130.health</a><li><a href=http://zhufengpeixun.com/strong/html/131.hooks.html>131.hooks</a><li><a href=http://zhufengpeixun.com/strong/html/132.keepalive.html>132.keepalive</a><li><a href=http://zhufengpeixun.com/strong/html/133.vue-cli.html>133.vue-cli</a><li><a href=http://zhufengpeixun.com/strong/html/134.react18.html>134.react18</a><li><a href=http://zhufengpeixun.com/strong/html/134.2.react18.html>134.2.react18</a><li><a href=http://zhufengpeixun.com/strong/html/134.3.react18.html>134.3.react18</a><li><a href=http://zhufengpeixun.com/strong/html/135.function.html>135.function</a><li><a href=http://zhufengpeixun.com/strong/html/136.toolkit.html>136.toolkit</a><li><a href=http://zhufengpeixun.com/strong/html/137.lerna.html>137.lerna</a><li><a href=http://zhufengpeixun.com/strong/html/138.create-vite.html>138.create-vite</a><li><a href=http://zhufengpeixun.com/strong/html/139.cli.html>139.cli</a><li><a href=http://zhufengpeixun.com/strong/html/140.antd.html>140.antd</a><li><a href=http://zhufengpeixun.com/strong/html/141.react-dnd.html>141.react-dnd</a><li><a href=http://zhufengpeixun.com/strong/html/142.1.link.html>142.1.link</a><li><a href=http://zhufengpeixun.com/strong/html/143.1.gulp.html>143.1.gulp</a><li><a href=http://zhufengpeixun.com/strong/html/143.2.stream.html>143.2.stream</a><li><a href=http://zhufengpeixun.com/strong/html/143.3.gulp.html>143.3.gulp</a><li><a href=http://zhufengpeixun.com/strong/html/144.1.closure.html>144.1.closure</a><li><a href=http://zhufengpeixun.com/strong/html/144.2.v8.html>144.2.v8</a><li><a href=http://zhufengpeixun.com/strong/html/144.3.gc.html>144.3.gc</a><li><a href=http://zhufengpeixun.com/strong/html/145.react-router-v6.html>145.react-router-v6</a><li><a href=http://zhufengpeixun.com/strong/html/146.browser.html>146.browser</a><li><a href=http://zhufengpeixun.com/strong/html/147.lighthouse.html>147.lighthouse</a><li><a href=http://zhufengpeixun.com/strong/html/148.1.basic.html>148.1.basic</a><li><a href=http://zhufengpeixun.com/strong/html/148.2.basic%20.html>148.2.basic </a><li><a href=http://zhufengpeixun.com/strong/html/148.3.basic.html>148.3.basic</a><li><a href=http://zhufengpeixun.com/strong/html/148.4.basic.html>148.4.basic</a><li><a href=http://zhufengpeixun.com/strong/html/148.5.basic.html>148.5.basic</a><li><a href=http://zhufengpeixun.com/strong/html/149.1.vite.html>149.1.vite</a><li><a href=http://zhufengpeixun.com/strong/html/149.2.vite.html>149.2.vite</a><li><a href=http://zhufengpeixun.com/strong/html/149.3.vite.html>149.3.vite</a><li><a href=http://zhufengpeixun.com/strong/html/149.4.vite.html>149.4.vite</a><li><a href=http://zhufengpeixun.com/strong/html/150.react-window.html>150.react-window</a><li><a href=http://zhufengpeixun.com/strong/html/151.react-query.html>151.react-query</a><li><a href=http://zhufengpeixun.com/strong/html/152.useRequest.html>152.useRequest</a><li><a href=http://zhufengpeixun.com/strong/html/153.transition.html>153.transition</a><li><a href=http://zhufengpeixun.com/strong/html/154.emotion.html>154.emotion</a><li><a href=http://zhufengpeixun.com/strong/html/155.1.formily.html>155.1.formily</a><li><a href=http://zhufengpeixun.com/strong/html/155.2.formily.html>155.2.formily</a><li><a href=http://zhufengpeixun.com/strong/html/155.3.formily.html>155.3.formily</a><li><a href=http://zhufengpeixun.com/strong/html/155.3.1.mobx.usage.html>155.3.1.mobx.usage</a><li><a href=http://zhufengpeixun.com/strong/html/155.3.2.mobx.source.html>155.3.2.mobx.source</a></ul> </div>
 
<div class=warpper>
 <div class=page-toc>
 <ul><li><a href=#t01.%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE>1.初始化项目</a><ul><li><a href=#t11.1%20%E5%AE%89%E8%A3%85>1.1 安装</a><li><a href=#t21.2%20vite.config.js>1.2 vite.config.js</a><li><a href=#t31.3%20index.html>1.3 index.html</a><li><a href=#t41.4%20src\main.js>1.4 src\main.js</a><li><a href=#t51.5%20src\App.vue>1.5 src\App.vue</a><li><a href=#t61.6%20package.json>1.6 package.json</a></ul><li><a href=#t72.%E5%AE%9E%E7%8E%B0vue%E6%8F%92%E4%BB%B6>2.实现vue插件</a><ul><li><a href=#t82.1%20vite.config.js>2.1 vite.config.js</a><li><a href=#t92.2%20plugin-vue.js>2.2 plugin-vue.js</a></ul><li><a href=#t103.%E5%AE%9E%E7%8E%B0jsx%E6%8F%92%E4%BB%B6>3.实现jsx插件</a><ul><li><a href=#t113.1%20%E5%AE%89%E8%A3%85>3.1 安装</a><li><a href=#t123.2%20vite.config.js>3.2 vite.config.js</a><li><a href=#t133.3%20plugin-vue-jsx.js>3.3 plugin-vue-jsx.js</a><li><a href=#t143.4%20main.js>3.4 main.js</a><li><a href=#t153.5%20src\App.jsx>3.5 src\App.jsx</a></ul><li><a href=#t164.HMR>4.HMR</a><ul><li><a href=#t174.1%20%E6%9B%B4%E6%96%B0%E6%B6%88%E6%81%AF>4.1 更新消息</a><li><a href=#t184.2%20%E7%83%AD%E6%9B%B4%E6%96%B0>4.2 热更新</a></ul><li><a href=#t195.SSR>5.SSR</a><ul><li><a href=#t205.1%20SSR-html>5.1 SSR-html</a><ul><li><a href=#t215.1.1%20ssr.js>5.1.1 ssr.js</a></ul><li><a href=#t225.2%20SSR-ssr>5.2 SSR-ssr</a><ul><li><a href=#t235.2.1%20entry-client.js>5.2.1 entry-client.js</a><li><a href=#t245.2.2%20entry-server.js>5.2.2 entry-server.js</a><li><a href=#t255.2.3%20src\main.js>5.2.3 src\main.js</a><li><a href=#t265.2.4%20src\router.js>5.2.4 src\router.js</a><li><a href=#t275.2.5%20src\App.jsx>5.2.5 src\App.jsx</a><li><a href=#t285.2.6%20src\pages\Home.jsx>5.2.6 src\pages\Home.jsx</a><li><a href=#t295.2.7%20src\pages\User.jsx>5.2.7 src\pages\User.jsx</a><li><a href=#t305.2.8%20server.js>5.2.8 server.js</a><li><a href=#t315.2.9%20plugin-vue-jsx.js>5.2.9 plugin-vue-jsx.js</a></ul></ul></ul>
 </div>
 <div class="content markdown-body">
 <h2 id=t01.初始化项目>1.初始化项目 <a href=#t01.%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE class=sf-hidden> # </a></h2>
<h3 id="t11.1 安装">1.1 安装 <a href=#t11.1%20%E5%AE%89%E8%A3%85 class=sf-hidden> # </a></h3>
<pre><code class=lang-js>pnpm init -y
pnpm install vite @vitejs/plugin-vue @rollup/pluginutils vue/compiler-sfc hash-sum --save-dev
</code></pre>
<h3 id="t21.2 vite.config.js">1.2 vite.config.js <a href=#t21.2%20vite.config.js class=sf-hidden> # </a></h3>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { defineConfig } <span class=hljs-keyword>from</span> <span class=hljs-string>"vite"</span>;
<span class=hljs-keyword>import</span> vue <span class=hljs-keyword>from</span> <span class=hljs-string>"@vitejs/plugin-vue"</span>;
<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> defineConfig({
  <span class=hljs-attr>plugins</span>: [vue({})]
});
</code></pre>
<h3 id="t31.3 index.html">1.3 index.html <a href=#t31.3%20index.html class=sf-hidden> # </a></h3>
<p>index.html</p>
<pre><code class=lang-html><span class=hljs-meta>&lt;!DOCTYPE <span class=hljs-meta-keyword>html</span>&gt;</span>
<span class=hljs-tag>&lt;<span class=hljs-name>html</span> <span class=hljs-attr>lang</span>=<span class=hljs-string>"en"</span>&gt;</span>

<span class=hljs-tag>&lt;<span class=hljs-name>head</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>meta</span> <span class=hljs-attr>charset</span>=<span class=hljs-string>"UTF-8"</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>meta</span> <span class=hljs-attr>http-equiv</span>=<span class=hljs-string>"X-UA-Compatible"</span> <span class=hljs-attr>content</span>=<span class=hljs-string>"IE=edge"</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>meta</span> <span class=hljs-attr>name</span>=<span class=hljs-string>"viewport"</span> <span class=hljs-attr>content</span>=<span class=hljs-string>"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>title</span>&gt;</span>vue<span class=hljs-tag>&lt;/<span class=hljs-name>title</span>&gt;</span>
<span class=hljs-tag>&lt;/<span class=hljs-name>head</span>&gt;</span>
<span class=hljs-tag>&lt;<span class=hljs-name>body</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>id</span>=<span class=hljs-string>"app"</span>&gt;</span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>script</span> <span class=hljs-attr>type</span>=<span class=hljs-string>"module"</span> <span class=hljs-attr>src</span>=<span class=hljs-string>"/src/main.js"</span>&gt;</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>&gt;</span>
<span class=hljs-tag>&lt;/<span class=hljs-name>body</span>&gt;</span>
<span class=hljs-tag>&lt;/<span class=hljs-name>html</span>&gt;</span>
</code></pre>
<h3 id="t41.4 src\main.js">1.4 src\main.js <a href=#t41.4%20src\main.js class=sf-hidden> # </a></h3>
<p>src\main.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { createApp } <span class=hljs-keyword>from</span> <span class=hljs-string>'vue'</span>;
<span class=hljs-keyword>import</span> App <span class=hljs-keyword>from</span> <span class=hljs-string>'./App.vue'</span>;
createApp(App).mount(<span class=hljs-string>"#app"</span>);
</code></pre>
<h3 id="t51.5 src\App.vue">1.5 src\App.vue <a href=#t51.5%20src\App.vue class=sf-hidden> # </a></h3>
<p>src\App.vue</p>
<pre><code class=lang-js>&lt;template&gt;
  &lt;h1&gt;App&lt;/h1&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'App'
}
&lt;/script&gt;
&lt;style&gt;
h1 {
  color: red;
}
&lt;/style&gt;
</code></pre>
<h3 id="t61.6 package.json">1.6 package.json <a href=#t61.6%20package.json class=sf-hidden> # </a></h3>
<pre><code class=lang-json>{
  <span class=hljs-attr>"scripts"</span>: {
    <span class=hljs-attr>"dev"</span>: <span class=hljs-string>"vite"</span>
  }
}
</code></pre>
<h2 id=t72.实现vue插件>2.实现vue插件 <a href=#t72.%E5%AE%9E%E7%8E%B0vue%E6%8F%92%E4%BB%B6 class=sf-hidden> # </a></h2>
<h3 id="t82.1 vite.config.js">2.1 vite.config.js <a href=#t82.1%20vite.config.js class=sf-hidden> # </a></h3>
<p>vite.config.js</p>
<pre><code class=lang-diff>import { defineConfig } from "vite";
<span class=hljs-deletion>-import vue from "@vitejs/plugin-vue";</span>
<span class=hljs-addition>+import vue from "./plugins/plugin-vue";</span>
export default defineConfig({
  plugins: [vue({})]
});
</code></pre>
<h3 id="t92.2 plugin-vue.js">2.2 plugin-vue.js <a href=#t92.2%20plugin-vue.js class=sf-hidden> # </a></h3>
<p>plugins\plugin-vue.js</p>
<pre><code class=lang-diff>import { createFilter, normalizePath } from '@rollup/pluginutils';
import { parse, compileScript, rewriteDefault, compileTemplate, compileStyleAsync } from 'vue/compiler-sfc';
import hash from 'hash-sum';
import path from 'path';
import fs from 'fs';
const root = process.cwd();
const descriptorCache = new Map();
function vue(pluginOptions) {
  const { include = /\.vue$/, exclude } = pluginOptions;
  const filter = createFilter(include, exclude);
  return {
    name: 'vue',
    async load(id) {
      //.log('id', id);//C:\aproject\zhufengwebpack202202\16.viteplugin\src\App.vue
      const { filename, query } = parseVueRequest(id);
      if (!filter(filename)) {
        return null;
      }
      if (query.has('vue')) {
        const descriptor = await getDescriptor(filename);
        if (query.get('type') <span class=hljs-comment>=== 'style') {</span>
          let block = descriptor.styles[Number(query.get('index'))];
          if (block) {
            return { code: block.content };
          }
        }
      }
    },
    async transform(code, id) {
      const { filename, query } = parseVueRequest(id);
      if (!filter(filename)) {
        return null;
      }
      if (query.get('type') <span class=hljs-comment>=== 'style') {</span>
        const descriptor = await getDescriptor(filename);
        let result = await transformStyle(code, descriptor, query.get('index'));
        return result;
      } else {
        let result = await transformMain(code, filename);
        return result;
      }

    }
  }
}
async function transformStyle(code, descriptor, index) {
  const block = descriptor.styles[index];
  //如果是CSS，其实翻译之后和翻译之前内容是一样的，最终返回的JS靠packages\vite\src\node\plugins\css.ts
  const result = await compileStyleAsync({
    filename: descriptor.filename,
    source: code,
    id: `data-v-${descriptor.id}`,//必须传递，不然报错
    scoped: block.scoped
  });
  let styleCode = result.code;
  return {
    code: styleCode
  };
  /*  let styleScript = `
   let style = document.createElement('style');
   style.innerText = ${JSON.stringify(styleCode)};
   document.head.appendChild(style);
   `;
   return {
     code: styleScript
   }; */
}
async function transformMain(source, filename) {
  const descriptor = await getDescriptor(filename, source);
  const scriptCode = genScriptCode(descriptor, filename);
  const templateCode = genTemplateCode(descriptor, filename);
  const stylesCode = genStyleCode(descriptor, filename);
  let resolveCode = [
    stylesCode,
    templateCode,
    scriptCode,
    `_sfc_main.render=render`,
    `export default _sfc_main`
  ].join('\n');
  return {
    code: resolveCode
  }
}
function genStyleCode(descriptor, filename) {
  let styleCode = '';
  if (descriptor.styles.length) {
    descriptor.styles.forEach((style, index) =&gt; {
      const query = `?vue&amp;type=style&amp;index=${index}&amp;lang=css`;
      const styleRequest = normalizePath(filename + query);// / 
      styleCode += `\nimport ${JSON.stringify(styleRequest)}`;
    });
    return styleCode;
  }
}
function genTemplateCode(descriptor, filename) {
  let result = compileTemplate({ source: descriptor.template.content, id: filename });
  return result.code;
}
/**
 * 获取此.vue文件编译 出来的js代码
 * @param {*} descriptor 
 * @param {*} filename 
 */
function genScriptCode(descriptor, filename) {
  let scriptCode = '';
  let script = compileScript(descriptor, { id: filename });
  scriptCode = rewriteDefault(script.content, '_sfc_main');//export default =&gt; const _sfc_main
  return scriptCode;
}

async function getDescriptor(filename, source) {
  let descriptor = descriptorCache.get(filename);
  if (descriptor) return descriptor;
  const content = await fs.promises.readFile(filename, 'utf8');
  const result = parse(content, { filename });
  descriptor = result.descriptor;
  descriptor.id = hash(path.relative(root, filename));
  descriptorCache.set(filename, descriptor);
  return descriptor;
}
function parseVueRequest(id) {
  const [filename, querystring = ''] = id.split('?');
  let query = new URLSearchParams(querystring);
  return {
    filename, query
  };
}
export default vue;
</code></pre>
<h2 id=t103.实现jsx插件>3.实现jsx插件 <a href=#t103.%E5%AE%9E%E7%8E%B0jsx%E6%8F%92%E4%BB%B6 class=sf-hidden> # </a></h2>
<h3 id="t113.1 安装">3.1 安装 <a href=#t113.1%20%E5%AE%89%E8%A3%85 class=sf-hidden> # </a></h3>
<pre><code class=lang-js>pnpm install @vitejs/plugin-vue-jsx --save-dev
pnpm install @vue/babel-plugin-jsx @babel/plugin-syntax-<span class=hljs-keyword>import</span>-meta @rollup/pluginutils @babel/plugin-transform-typescript hash-sum morgan fs-extra --save-dev
</code></pre>
<h3 id="t123.2 vite.config.js">3.2 vite.config.js <a href=#t123.2%20vite.config.js class=sf-hidden> # </a></h3>
<p>vite.config.js</p>
<pre><code class=lang-diff>import { defineConfig } from "vite";
<span class=hljs-deletion>-import vue from "@vitejs/plugin-vue";</span>
<span class=hljs-deletion>-import vue from "./plugins/plugin-vue";</span>
<span class=hljs-addition>+import vueJsx from "./plugins/plugin-vue-jsx.js";</span>
export default defineConfig({
<span class=hljs-addition>+ plugins: [vueJsx({})]</span>
});
</code></pre>
<h3 id="t133.3 plugin-vue-jsx.js">3.3 plugin-vue-jsx.js <a href=#t133.3%20plugin-vue-jsx.js class=sf-hidden> # </a></h3>
<p>plugins\plugin-vue-jsx.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { transformSync } <span class=hljs-keyword>from</span> <span class=hljs-string>'@babel/core'</span>
<span class=hljs-keyword>import</span> jsx <span class=hljs-keyword>from</span> <span class=hljs-string>'@vue/babel-plugin-jsx'</span>
<span class=hljs-keyword>import</span> importMeta <span class=hljs-keyword>from</span> <span class=hljs-string>'@babel/plugin-syntax-import-meta'</span>
<span class=hljs-keyword>import</span> { createFilter } <span class=hljs-keyword>from</span> <span class=hljs-string>'@rollup/pluginutils'</span>
<span class=hljs-keyword>import</span> typescript <span class=hljs-keyword>from</span> <span class=hljs-string>'@babel/plugin-transform-typescript'</span>;
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>vueJsxPlugin</span>(<span class=hljs-params>options = {}</span>) </span>{
  <span class=hljs-keyword>let</span> root;
  <span class=hljs-keyword>return</span> {
    <span class=hljs-attr>name</span>: <span class=hljs-string>'vite:vue-jsx'</span>,
    config() {
      <span class=hljs-keyword>return</span> {
        <span class=hljs-attr>esbuild</span>: {
          <span class=hljs-comment>//默认情况下在开发的时候会编译我们的代码，它会也会编译jsx,但是它会编译 成React.createElement</span>
          <span class=hljs-attr>include</span>: <span class=hljs-regexp>/\.ts$/</span>
        },
        <span class=hljs-attr>define</span>: {
          <span class=hljs-attr>__VUE_OPTIONS_API__</span>: <span class=hljs-literal>true</span>,
          <span class=hljs-attr>__VUE_PROD_DEVTOOLS__</span>: <span class=hljs-literal>false</span>
        }
      }
    },
    configResolved(config) {
      root = config.root
    },
    transform(code, id) {
      <span class=hljs-keyword>const</span> {
        include,
        exclude,
        babelPlugins = [],
        ...babelPluginOptions
      } = options
      <span class=hljs-keyword>const</span> filter = createFilter(include || <span class=hljs-regexp>/\.[jt]sx$/</span>, exclude)
      <span class=hljs-keyword>const</span> [filepath] = id.split(<span class=hljs-string>'?'</span>)
      <span class=hljs-keyword>if</span> (filter(id) || filter(filepath)) {
        <span class=hljs-keyword>const</span> plugins = [importMeta, [jsx, babelPluginOptions], ...babelPlugins]
        <span class=hljs-keyword>if</span> (id.endsWith(<span class=hljs-string>'.tsx'</span>) || filepath.endsWith(<span class=hljs-string>'.tsx'</span>)) {
          plugins.push([
            typescript,
            { <span class=hljs-attr>isTSX</span>: <span class=hljs-literal>true</span>, <span class=hljs-attr>allowExtensions</span>: <span class=hljs-literal>true</span> }
          ])
        }
        <span class=hljs-keyword>const</span> result = transformSync(code, {
          <span class=hljs-attr>babelrc</span>: <span class=hljs-literal>false</span>,
          <span class=hljs-attr>configFile</span>: <span class=hljs-literal>false</span>,
          <span class=hljs-attr>ast</span>: <span class=hljs-literal>true</span>,
          plugins
        })
        <span class=hljs-keyword>return</span> {
          <span class=hljs-attr>code</span>: result.code,
          <span class=hljs-attr>map</span>: result.map
        }
      }
    }
  }
}
<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> vueJsxPlugin;

</code></pre>
<h3 id="t143.4 main.js">3.4 main.js <a href=#t143.4%20main.js class=sf-hidden> # </a></h3>
<p>src\main.js</p>
<pre><code class=lang-diff>import { createApp } from 'vue';
<span class=hljs-addition>+import App from './App.jsx';</span>
createApp(App).mount("#app");
</code></pre>
<h3 id="t153.5 src\App.jsx">3.5 src\App.jsx <a href=#t153.5%20src\App.jsx class=sf-hidden> # </a></h3>
<p>src\App.jsx</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { defineComponent } <span class=hljs-keyword>from</span> <span class=hljs-string>'vue'</span>;
<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> defineComponent({
  setup() {
    <span class=hljs-keyword>return</span> <span class=hljs-function><span class=hljs-params>()</span> =&gt;</span> (
      <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>h1</span>&gt;</span>App<span class=hljs-tag>&lt;/<span class=hljs-name>h1</span>&gt;</span></span>
    )
  }
})
</code></pre>
<h2 id=t164.HMR>4.HMR <a href=#t164.HMR class=sf-hidden> # </a></h2>
<h3 id="t174.1 更新消息">4.1 更新消息 <a href=#t174.1%20%E6%9B%B4%E6%96%B0%E6%B6%88%E6%81%AF class=sf-hidden> # </a></h3>
<pre><code class=lang-json>{
  <span class=hljs-attr>"type"</span>:<span class=hljs-string>"update"</span>,
  <span class=hljs-attr>"updates"</span>:[
    {<span class=hljs-attr>"type"</span>:<span class=hljs-string>"js-update"</span>,<span class=hljs-attr>"timestamp"</span>:<span class=hljs-number>1647485594371</span>,<span class=hljs-attr>"path"</span>:<span class=hljs-string>"/src/App.jsx"</span>,<span class=hljs-attr>"acceptedPath"</span>:<span class=hljs-string>"/src/App.jsx"</span>}
  ]}    
</code></pre>
<h3 id="t184.2 热更新">4.2 热更新 <a href=#t184.2%20%E7%83%AD%E6%9B%B4%E6%96%B0 class=sf-hidden> # </a></h3>
<pre><code class=lang-diff>import { transformSync } from '@babel/core'
import jsx from '@vue/babel-plugin-jsx'
import importMeta from '@babel/plugin-syntax-import-meta'
import { createFilter } from '@rollup/pluginutils'
import typescript from '@babel/plugin-transform-typescript';
<span class=hljs-addition>+import hash from 'hash-sum'</span>
<span class=hljs-addition>+import path from 'path'</span>
function vueJsxPlugin(options = {}) {
<span class=hljs-addition>+ let needHmr = false</span>
  return {
    name: 'vite:vue-jsx',
    config() {
      return {
        esbuild: {
          include: /\.ts$/
        },
        define: {
          __VUE_OPTIONS_API__: true,
          __VUE_PROD_DEVTOOLS__: false
        }
      }
    },
    configResolved(config) {
      root = config.root
<span class=hljs-addition>+     needHmr = config.command === 'serve' &amp;&amp; !config.isProduction</span>
    },
    transform(code, id) {
      const {
        include,
        exclude,
        babelPlugins = [],
        ...babelPluginOptions
      } = options
      const filter = createFilter(include || /\.[jt]sx$/, exclude)
      const [filepath] = id.split('?')
      if (filter(id) || filter(filepath)) {
        const plugins = [importMeta, [jsx, babelPluginOptions], ...babelPlugins]
        if (id.endsWith('.tsx') || filepath.endsWith('.tsx')) {
          plugins.push([
            typescript,
            { isTSX: true, allowExtensions: true }
          ])
        }
        const result = transformSync(code, {
          babelrc: false,
          configFile: false,
          ast: true,
          plugins
        })
<span class=hljs-addition>+       if (!needHmr) {</span>
          return { code: result.code, map: result.map }
<span class=hljs-addition>+       }</span>
<span class=hljs-addition>+       const hotComponents = []</span>
<span class=hljs-addition>+       let hasDefault = false</span>
<span class=hljs-addition>+       for (const node of result.ast.program.body) {</span>
<span class=hljs-addition>+         if (node.type === 'ExportDefaultDeclaration') {</span>
<span class=hljs-addition>+           if (isDefineComponentCall(node.declaration)) {</span>
<span class=hljs-addition>+             hasDefault = true</span>
<span class=hljs-addition>+             hotComponents.push({</span>
<span class=hljs-addition>+               local: '__default__',</span>
<span class=hljs-addition>+               exported: 'default',</span>
<span class=hljs-addition>+               id: hash(id + 'default')</span>
<span class=hljs-addition>+             })</span>
<span class=hljs-addition>+           }</span>
<span class=hljs-addition>+         }</span>
<span class=hljs-addition>+       }</span>
<span class=hljs-addition>+       if (hotComponents.length) {</span>
<span class=hljs-addition>+         if (hasDefault &amp;&amp; (needHmr)) {</span>
<span class=hljs-addition>+           result.code =</span>
<span class=hljs-addition>+             result.code.replace(</span>
<span class=hljs-addition>+               /export default defineComponent/g,</span>
<span class=hljs-addition>+               `const __default__ = defineComponent`</span>
<span class=hljs-addition>+             ) + `\nexport default __default__`</span>
<span class=hljs-addition>+         }</span>

<span class=hljs-addition>+         if (needHmr &amp;&amp; !/\?vue&amp;type=script/.test(id)) {</span>
<span class=hljs-addition>+           let code = result.code</span>
<span class=hljs-addition>+           let callbackCode = ``</span>
<span class=hljs-addition>+           for (const { local, exported, id } of hotComponents) {</span>
<span class=hljs-addition>+             code +=</span>
<span class=hljs-addition>+               `\n${local}.__hmrId = "${id}"` +</span>
<span class=hljs-addition>+               `\n__VUE_HMR_RUNTIME__.createRecord("${id}", ${local})`</span>
<span class=hljs-addition>+             callbackCode += `\n__VUE_HMR_RUNTIME__.reload("${id}", __${exported})`</span>
<span class=hljs-addition>+           }</span>
<span class=hljs-addition>+           code += `\nimport.meta.hot.accept(({${hotComponents</span>
<span class=hljs-addition>+             .map((c) =&gt; `${c.exported}: __${c.exported}`)</span>
<span class=hljs-addition>+             .join(',')}}) =&gt; {${callbackCode}\n})`</span>
<span class=hljs-addition>+           result.code = code</span>
<span class=hljs-addition>+         }</span>
<span class=hljs-addition>+       }</span>
<span class=hljs-addition>+       return {</span>
<span class=hljs-addition>+         code: result.code,</span>
<span class=hljs-addition>+         map: result.map</span>
<span class=hljs-addition>+       }</span>
      }
    }
  }
}
function isDefineComponentCall(node) {
  return (
    node &amp;&amp;
    node.type <span class=hljs-comment>=== 'CallExpression' &amp;&amp;</span>
    node.callee.type <span class=hljs-comment>=== 'Identifier' &amp;&amp;</span>
    node.callee.name <span class=hljs-comment>=== 'defineComponent'</span>
  )
}
export default vueJsxPlugin;

</code></pre>
<h2 id=t195.SSR>5.SSR <a href=#t195.SSR class=sf-hidden> # </a></h2>
<h3 id="t205.1 SSR-html">5.1 SSR-html <a href=#t205.1%20SSR-html class=sf-hidden> # </a></h3>
<h4 id="t215.1.1 ssr.js">5.1.1 ssr.js <a href=#t215.1.1%20ssr.js class=sf-hidden> # </a></h4>
<pre><code class=lang-js><span class=hljs-keyword>import</span> express <span class=hljs-keyword>from</span> <span class=hljs-string>"express"</span>;
<span class=hljs-keyword>import</span> { createServer } <span class=hljs-keyword>from</span> <span class=hljs-string>'vite'</span>
<span class=hljs-keyword>const</span> app = express();
; (<span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> vite = <span class=hljs-keyword>await</span> createServer({
    <span class=hljs-attr>server</span>: {
      <span class=hljs-attr>middlewareMode</span>: <span class=hljs-string>'html'</span>
    }
  })
  app.use(vite.middlewares);
  app.listen(<span class=hljs-number>8000</span>, () =&gt; <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'ssr server started on 8000'</span>))
})();
</code></pre>
<h3 id="t225.2 SSR-ssr">5.2 SSR-ssr <a href=#t225.2%20SSR-ssr class=sf-hidden> # </a></h3>
<h4 id="t235.2.1 entry-client.js">5.2.1 entry-client.js <a href=#t235.2.1%20entry-client.js class=sf-hidden> # </a></h4>
<p>src\entry-client.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { createApp } <span class=hljs-keyword>from</span> <span class=hljs-string>'./main'</span>
<span class=hljs-keyword>const</span> { app, router } = createApp()
router.isReady().then(<span class=hljs-function><span class=hljs-params>()</span> =&gt;</span> {
  app.mount(<span class=hljs-string>'#app'</span>)
})
</code></pre>
<h4 id="t245.2.2 entry-server.js">5.2.2 entry-server.js <a href=#t245.2.2%20entry-server.js class=sf-hidden> # </a></h4>
<p>src\entry-server.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { createApp } <span class=hljs-keyword>from</span> <span class=hljs-string>'./main'</span>
<span class=hljs-keyword>import</span> { renderToString } <span class=hljs-keyword>from</span> <span class=hljs-string>'@vue/server-renderer'</span>
<span class=hljs-keyword>export</span> <span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>render</span>(<span class=hljs-params>url, manifest = {}</span>) </span>{
  <span class=hljs-keyword>const</span> { app, router } = createApp()
  router.push(url)
  <span class=hljs-keyword>await</span> router.isReady()
  <span class=hljs-keyword>const</span> ctx = {}
  <span class=hljs-keyword>const</span> html = <span class=hljs-keyword>await</span> renderToString(app, ctx)
  <span class=hljs-keyword>const</span> preloadLinks = renderPreloadLinks(ctx.modules, manifest)
  <span class=hljs-keyword>return</span> [html, preloadLinks]
}
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>renderPreloadLinks</span>(<span class=hljs-params>modules, manifest</span>) </span>{
  <span class=hljs-keyword>let</span> links = <span class=hljs-string>''</span>
  <span class=hljs-keyword>const</span> seen = <span class=hljs-keyword>new</span> <span class=hljs-built_in>Set</span>()
  modules.forEach(<span class=hljs-function>(<span class=hljs-params>id</span>) =&gt;</span> {
    <span class=hljs-keyword>const</span> files = manifest[id]
    <span class=hljs-keyword>if</span> (files) {
      files.forEach(<span class=hljs-function>(<span class=hljs-params>file</span>) =&gt;</span> {
        <span class=hljs-keyword>if</span> (!seen.has(file)) {
          seen.add(file)
          links += renderPreloadLink(file)
        }
      })
    }
  })
  <span class=hljs-keyword>return</span> links
}
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>renderPreloadLink</span>(<span class=hljs-params>file</span>) </span>{
  <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'file'</span>, file);
  <span class=hljs-keyword>if</span> (file.endsWith(<span class=hljs-string>'.js'</span>) || file.endsWith(<span class=hljs-string>'.jsx'</span>)) {
    <span class=hljs-keyword>return</span> <span class=hljs-string>`&lt;link rel="modulepreload" crossorigin href="<span class=hljs-subst>${file}</span>"&gt;`</span>
  } <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (file.endsWith(<span class=hljs-string>'.css'</span>)) {
    <span class=hljs-keyword>return</span> <span class=hljs-string>`&lt;link rel="stylesheet" href="<span class=hljs-subst>${file}</span>"&gt;`</span>
  } <span class=hljs-keyword>else</span> {
    <span class=hljs-keyword>return</span> <span class=hljs-string>''</span>
  }
}
</code></pre>
<h4 id="t255.2.3 src\main.js">5.2.3 src\main.js <a href=#t255.2.3%20src\main.js class=sf-hidden> # </a></h4>
<p>src\main.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> App <span class=hljs-keyword>from</span> <span class=hljs-string>'./App.jsx'</span>
<span class=hljs-keyword>import</span> { createSSRApp } <span class=hljs-keyword>from</span> <span class=hljs-string>'vue'</span>
<span class=hljs-keyword>import</span> { createRouter } <span class=hljs-keyword>from</span> <span class=hljs-string>'./router'</span>
<span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>createApp</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> app = createSSRApp(App)
  <span class=hljs-keyword>const</span> router = createRouter()
  app.use(router)
  <span class=hljs-keyword>return</span> { app, router }
}
</code></pre>
<h4 id="t265.2.4 src\router.js">5.2.4 src\router.js <a href=#t265.2.4%20src\router.js class=sf-hidden> # </a></h4>
<p>src\router.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> {
  createMemoryHistory,
  createRouter <span class=hljs-keyword>as</span> _createRouter,
  createWebHistory
} <span class=hljs-keyword>from</span> <span class=hljs-string>'vue-router'</span>
<span class=hljs-keyword>const</span> pages = <span class=hljs-keyword>import</span>.meta.glob(<span class=hljs-string>'./pages/*.jsx'</span>)
<span class=hljs-keyword>const</span> routes = <span class=hljs-built_in>Object</span>.keys(pages).map(<span class=hljs-function>(<span class=hljs-params>path</span>) =&gt;</span> {
  <span class=hljs-keyword>const</span> name = path.match(<span class=hljs-regexp>/\.\/pages(.*)\.jsx$/</span>)[<span class=hljs-number>1</span>].toLowerCase()
  <span class=hljs-keyword>return</span> {
    <span class=hljs-attr>path</span>: name === <span class=hljs-string>'/home'</span> ? <span class=hljs-string>'/'</span> : name,
    <span class=hljs-attr>component</span>: pages[path]
  }
})
<span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>createRouter</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>return</span> _createRouter({
    <span class=hljs-attr>history</span>: <span class=hljs-keyword>import</span>.meta.env.SSR ? createMemoryHistory() : createWebHistory(),
    routes
  })
}

</code></pre>
<h4 id="t275.2.5 src\App.jsx">5.2.5 src\App.jsx <a href=#t275.2.5%20src\App.jsx class=sf-hidden> # </a></h4>
<p>src\App.jsx</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { defineComponent } <span class=hljs-keyword>from</span> <span class=hljs-string>'vue'</span>;

<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> defineComponent({
  setup() {
    <span class=hljs-keyword>return</span> <span class=hljs-function><span class=hljs-params>()</span> =&gt;</span> (
      <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>div</span>&gt;</span>
        <span class=hljs-tag>&lt;<span class=hljs-name>ul</span>&gt;</span>
          <span class=hljs-tag>&lt;<span class=hljs-name>li</span>&gt;</span><span class=hljs-tag>&lt;<span class=hljs-name>router-link</span> <span class=hljs-attr>to</span>=<span class=hljs-string>"/"</span>&gt;</span>Home<span class=hljs-tag>&lt;/<span class=hljs-name>router-link</span>&gt;</span><span class=hljs-tag>&lt;/<span class=hljs-name>li</span>&gt;</span>
          <span class=hljs-tag>&lt;<span class=hljs-name>li</span>&gt;</span><span class=hljs-tag>&lt;<span class=hljs-name>router-link</span> <span class=hljs-attr>to</span>=<span class=hljs-string>"/user"</span>&gt;</span>User<span class=hljs-tag>&lt;/<span class=hljs-name>router-link</span>&gt;</span><span class=hljs-tag>&lt;/<span class=hljs-name>li</span>&gt;</span>
        <span class=hljs-tag>&lt;/<span class=hljs-name>ul</span>&gt;</span>
        <span class=hljs-tag>&lt;<span class=hljs-name>router-view</span>&gt;</span><span class=hljs-tag>&lt;/<span class=hljs-name>router-view</span>&gt;</span>
      <span class=hljs-tag>&lt;/<span class=hljs-name>div</span>&gt;</span></span>
    )
  }
})
</code></pre>
<h4 id="t285.2.6 src\pages\Home.jsx">5.2.6 src\pages\Home.jsx <a href=#t285.2.6%20src\pages\Home.jsx class=sf-hidden> # </a></h4>
<p>src\pages\Home.jsx</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { defineComponent } <span class=hljs-keyword>from</span> <span class=hljs-string>'vue'</span>;
<span class=hljs-keyword>import</span> { useSSRContext } <span class=hljs-keyword>from</span> <span class=hljs-string>"vue"</span>
<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> defineComponent({
  setup() {
    <span class=hljs-keyword>const</span> ssrContext = useSSRContext()
    <span class=hljs-built_in>console</span>.log(ssrContext.modules);
    <span class=hljs-keyword>return</span> <span class=hljs-function>(<span class=hljs-params>props, ctx</span>) =&gt;</span> {
      <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'props'</span>, props);
      <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'ctx'</span>, ctx);
      <span class=hljs-keyword>return</span> <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>h1</span>&gt;</span>Home<span class=hljs-tag>&lt;/<span class=hljs-name>h1</span>&gt;</span></span>;
    }
  }
})
</code></pre>
<h4 id="t295.2.7 src\pages\User.jsx">5.2.7 src\pages\User.jsx <a href=#t295.2.7%20src\pages\User.jsx class=sf-hidden> # </a></h4>
<p>src\pages\User.jsx</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { defineComponent } <span class=hljs-keyword>from</span> <span class=hljs-string>'vue'</span>;

<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> defineComponent({
  setup() {
    <span class=hljs-keyword>return</span> <span class=hljs-function><span class=hljs-params>()</span> =&gt;</span> (
      <span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>h1</span>&gt;</span>User<span class=hljs-tag>&lt;/<span class=hljs-name>h1</span>&gt;</span></span>
    )
  }
})
</code></pre>
<h4 id="t305.2.8 server.js">5.2.8 server.js <a href=#t305.2.8%20server.js class=sf-hidden> # </a></h4>
<p>server.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> express <span class=hljs-keyword>from</span> <span class=hljs-string>"express"</span>;
<span class=hljs-keyword>import</span> logger <span class=hljs-keyword>from</span> <span class=hljs-string>'morgan'</span>;
<span class=hljs-keyword>import</span> { createServer } <span class=hljs-keyword>from</span> <span class=hljs-string>'vite'</span>
<span class=hljs-keyword>import</span> fs <span class=hljs-keyword>from</span> <span class=hljs-string>'fs-extra'</span>;
<span class=hljs-keyword>import</span> path <span class=hljs-keyword>from</span> <span class=hljs-string>'path'</span>;
<span class=hljs-keyword>const</span> app = express();

; (<span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> vite = <span class=hljs-keyword>await</span> createServer({
    <span class=hljs-attr>server</span>: {
      <span class=hljs-attr>middlewareMode</span>: <span class=hljs-string>'ssr'</span>
    }
  })
  <span class=hljs-keyword>let</span> manifest = <span class=hljs-built_in>JSON</span>.parse(fs.readFileSync(path.resolve(<span class=hljs-string>'dist/client/ssr-manifest.json'</span>), <span class=hljs-string>'utf-8'</span>))
  app.use(vite.middlewares);
  app.use(logger(<span class=hljs-string>'dev'</span>));
  app.use(<span class=hljs-string>'*'</span>, <span class=hljs-keyword>async</span> (req, res) =&gt; {
    <span class=hljs-keyword>const</span> url = req.originalUrl
    <span class=hljs-keyword>try</span> {
      <span class=hljs-comment>// 1. 读取 index.html</span>
      <span class=hljs-keyword>let</span> template = fs.readFileSync(path.resolve(<span class=hljs-string>'index.html'</span>), <span class=hljs-string>'utf-8'</span>)
      <span class=hljs-comment>// 2. 应用 Vite HTML 转换。这将会注入 Vite HMR 客户端，</span>
      <span class=hljs-comment>//    同时也会从 Vite 插件应用 HTML 转换。</span>
      <span class=hljs-comment>//    例如：@vitejs/plugin-react-refresh 中的 global preambles</span>
      template = <span class=hljs-keyword>await</span> vite.transformIndexHtml(url, template)

      <span class=hljs-comment>// 3. 加载服务器入口。vite.ssrLoadModule 将自动转换</span>
      <span class=hljs-comment>//    你的 ESM 源码使之可以在 Node.js 中运行！无需打包</span>
      <span class=hljs-comment>//    并提供类似 HMR 的根据情况随时失效。</span>
      <span class=hljs-keyword>const</span> { render } = <span class=hljs-keyword>await</span> vite.ssrLoadModule(<span class=hljs-string>'/src/entry-server.js'</span>)

      <span class=hljs-comment>// 4. 渲染应用的 HTML。这假设 entry-server.js 导出的 `render`</span>
      <span class=hljs-comment>//    函数调用了适当的 SSR 框架 API。</span>
      <span class=hljs-comment>//    例如 ReactDOMServer.renderToString()</span>
      <span class=hljs-keyword>const</span> [appHtml, preloadLinks] = <span class=hljs-keyword>await</span> render(url, manifest)
      <span class=hljs-comment>// 5. 注入渲染后的应用程序 HTML 到模板中。</span>
      <span class=hljs-keyword>const</span> html = template
        .replace(<span class=hljs-string>`&lt;!--preload-links--&gt;`</span>, preloadLinks)
        .replace(<span class=hljs-string>`&lt;!--app-html--&gt;`</span>, appHtml)
      <span class=hljs-comment>// 6. 返回渲染后的 HTML。</span>
      res.status(<span class=hljs-number>200</span>).set({ <span class=hljs-string>'Content-Type'</span>: <span class=hljs-string>'text/html'</span> }).end(html)
    } <span class=hljs-keyword>catch</span> (e) {
      <span class=hljs-comment>// 如果捕获到了一个错误，让 Vite 来修复该堆栈，这样它就可以映射回</span>
      <span class=hljs-comment>// 你的实际源码中。</span>
      vite.ssrFixStacktrace(e)
      <span class=hljs-built_in>console</span>.error(e)
      res.status(<span class=hljs-number>500</span>).end(e.message)
    }
  })
  app.listen(<span class=hljs-number>8000</span>, () =&gt; <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'ssr server started on 8000'</span>))
})();
</code></pre>
<h4 id="t315.2.9 plugin-vue-jsx.js">5.2.9 plugin-vue-jsx.js <a href=#t315.2.9%20plugin-vue-jsx.js class=sf-hidden> # </a></h4>
<p>plugins\plugin-vue-jsx.js</p>
<pre><code class=lang-js><span class=hljs-keyword>import</span> { transformSync } <span class=hljs-keyword>from</span> <span class=hljs-string>'@babel/core'</span>
<span class=hljs-keyword>import</span> jsx <span class=hljs-keyword>from</span> <span class=hljs-string>'@vue/babel-plugin-jsx'</span>
<span class=hljs-keyword>import</span> importMeta <span class=hljs-keyword>from</span> <span class=hljs-string>'@babel/plugin-syntax-import-meta'</span>
<span class=hljs-keyword>import</span> { createFilter, normalizePath } <span class=hljs-keyword>from</span> <span class=hljs-string>'@rollup/pluginutils'</span>
<span class=hljs-keyword>import</span> typescript <span class=hljs-keyword>from</span> <span class=hljs-string>'@babel/plugin-transform-typescript'</span>;
<span class=hljs-keyword>import</span> hash <span class=hljs-keyword>from</span> <span class=hljs-string>'hash-sum'</span>
<span class=hljs-keyword>const</span> path = <span class=hljs-built_in>require</span>(<span class=hljs-string>'path'</span>)
<span class=hljs-keyword>const</span> ssrRegisterHelperId = <span class=hljs-string>'/__vue-jsx-ssr-register-helper'</span>
<span class=hljs-keyword>const</span> ssrRegisterHelperCode =
  <span class=hljs-string>`import { useSSRContext } from "vue"\n`</span> +
  <span class=hljs-string>`export <span class=hljs-subst>${ssrRegisterHelper.toString()}</span>`</span>

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>ssrRegisterHelper</span>(<span class=hljs-params>comp, filename</span>) </span>{
  <span class=hljs-keyword>const</span> setup = comp.setup
  comp.setup = <span class=hljs-function>(<span class=hljs-params>props, ctx</span>) =&gt;</span> {
    <span class=hljs-comment>// @ts-ignore</span>
    <span class=hljs-keyword>const</span> ssrContext = useSSRContext()
      ; (ssrContext.modules || (ssrContext.modules = <span class=hljs-keyword>new</span> <span class=hljs-built_in>Set</span>())).add(filename)
    <span class=hljs-keyword>if</span> (setup) {
      <span class=hljs-keyword>return</span> setup(props, ctx)
    }
  }
}
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>vueJsxPlugin</span>(<span class=hljs-params>options = {}</span>) </span>{
  <span class=hljs-keyword>let</span> root;
  <span class=hljs-keyword>let</span> needHmr = <span class=hljs-literal>false</span>
  <span class=hljs-keyword>return</span> {
    <span class=hljs-attr>name</span>: <span class=hljs-string>'vite:vue-jsx'</span>,
    config() {
      <span class=hljs-keyword>return</span> {
        <span class=hljs-attr>esbuild</span>: {
          <span class=hljs-attr>include</span>: <span class=hljs-regexp>/\.ts$/</span>
        },
        <span class=hljs-attr>define</span>: {
          <span class=hljs-attr>__VUE_OPTIONS_API__</span>: <span class=hljs-literal>true</span>,
          <span class=hljs-attr>__VUE_PROD_DEVTOOLS__</span>: <span class=hljs-literal>false</span>
        }
      }
    },
    configResolved(config) {
      root = config.root
      needHmr = config.command === <span class=hljs-string>'serve'</span> &amp;&amp; !config.isProduction
    },
    transform(code, id, { ssr }) {
      <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'ssr'</span>, ssr);
      <span class=hljs-keyword>const</span> {
        include,
        exclude,
        babelPlugins = [],
        ...babelPluginOptions
      } = options
      <span class=hljs-keyword>const</span> filter = createFilter(include || <span class=hljs-regexp>/\.[jt]sx$/</span>, exclude)
      <span class=hljs-keyword>const</span> [filepath] = id.split(<span class=hljs-string>'?'</span>)
      <span class=hljs-keyword>if</span> (filter(id) || filter(filepath)) {
        <span class=hljs-keyword>const</span> plugins = [importMeta, [jsx, babelPluginOptions], ...babelPlugins]
        <span class=hljs-keyword>if</span> (id.endsWith(<span class=hljs-string>'.tsx'</span>) || filepath.endsWith(<span class=hljs-string>'.tsx'</span>)) {
          plugins.push([
            typescript,
            { <span class=hljs-attr>isTSX</span>: <span class=hljs-literal>true</span>, <span class=hljs-attr>allowExtensions</span>: <span class=hljs-literal>true</span> }
          ])
        }
        <span class=hljs-keyword>const</span> result = transformSync(code, {
          <span class=hljs-attr>babelrc</span>: <span class=hljs-literal>false</span>,
          <span class=hljs-attr>configFile</span>: <span class=hljs-literal>false</span>,
          <span class=hljs-attr>ast</span>: <span class=hljs-literal>true</span>,
          plugins
        })
        <span class=hljs-keyword>if</span> (!needHmr) {
          <span class=hljs-keyword>return</span> { <span class=hljs-attr>code</span>: result.code, <span class=hljs-attr>map</span>: result.map }
        }
        <span class=hljs-keyword>const</span> hotComponents = []
        <span class=hljs-keyword>let</span> hasDefault = <span class=hljs-literal>false</span>
        <span class=hljs-keyword>for</span> (<span class=hljs-keyword>const</span> node <span class=hljs-keyword>of</span> result.ast.program.body) {
          <span class=hljs-keyword>if</span> (node.type === <span class=hljs-string>'ExportDefaultDeclaration'</span>) {
            <span class=hljs-keyword>if</span> (isDefineComponentCall(node.declaration)) {
              hasDefault = <span class=hljs-literal>true</span>
              hotComponents.push({
                <span class=hljs-attr>local</span>: <span class=hljs-string>'__default__'</span>,
                <span class=hljs-attr>exported</span>: <span class=hljs-string>'default'</span>,
                <span class=hljs-attr>id</span>: hash(id + <span class=hljs-string>'default'</span>)
              })
            }
          }
        }
        <span class=hljs-keyword>if</span> (hotComponents.length) {
          <span class=hljs-keyword>if</span> (hasDefault &amp;&amp; (needHmr)) {
            result.code =
              result.code.replace(
                <span class=hljs-regexp>/export default defineComponent/g</span>,
                <span class=hljs-string>`const __default__ = defineComponent`</span>
              ) + <span class=hljs-string>`\nexport default __default__`</span>
          }

          <span class=hljs-keyword>if</span> (needHmr &amp;&amp; !<span class=hljs-regexp>/\?vue&amp;type=script/</span>.test(id)) {
            <span class=hljs-keyword>let</span> code = result.code
            <span class=hljs-keyword>let</span> callbackCode = <span class=hljs-string>``</span>
            <span class=hljs-keyword>for</span> (<span class=hljs-keyword>const</span> { local, exported, id } <span class=hljs-keyword>of</span> hotComponents) {
              code +=
                <span class=hljs-string>`\n<span class=hljs-subst>${local}</span>.__hmrId = "<span class=hljs-subst>${id}</span>"`</span> +
                <span class=hljs-string>`\n__VUE_HMR_RUNTIME__.createRecord("<span class=hljs-subst>${id}</span>", <span class=hljs-subst>${local}</span>)`</span>
              callbackCode += <span class=hljs-string>`\n__VUE_HMR_RUNTIME__.reload("<span class=hljs-subst>${id}</span>", __<span class=hljs-subst>${exported}</span>)`</span>
            }
            code += <span class=hljs-string>`\nimport.meta.hot.accept(({<span class=hljs-subst>${hotComponents
              .map((c) =&gt; <span class=hljs-string>`<span class=hljs-subst>${c.exported}</span>: __<span class=hljs-subst>${c.exported}</span>`</span>)
              .join(<span class=hljs-string>','</span>)}</span>}) =&gt; {<span class=hljs-subst>${callbackCode}</span>\n})`</span>
            result.code = code
          }
        }
        <span class=hljs-keyword>if</span> (ssr) {
          <span class=hljs-keyword>const</span> normalizedId = normalizePath(path.relative(root, id))
          <span class=hljs-keyword>let</span> ssrInjectCode =
            <span class=hljs-string>`\nimport { ssrRegisterHelper } from "<span class=hljs-subst>${ssrRegisterHelperId}</span>"`</span> +
            <span class=hljs-string>`\nconst __moduleId = <span class=hljs-subst>${<span class=hljs-built_in>JSON</span>.stringify(normalizedId)}</span>`</span>
         git  <span class=hljs-keyword>for</span> (<span class=hljs-keyword>const</span> { local } <span class=hljs-keyword>of</span> hotComponents) {
            ssrInjectCode += <span class=hljs-string>`\nssrRegisterHelper(<span class=hljs-subst>${local}</span>, __moduleId)`</span>
          }
          result.code += ssrInjectCode
        }
        <span class=hljs-keyword>return</span> {
          <span class=hljs-attr>code</span>: result.code,
          <span class=hljs-attr>map</span>: result.map
        }
      }
    }
  }
}
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>isDefineComponentCall</span>(<span class=hljs-params>node</span>) </span>{
  <span class=hljs-keyword>return</span> (
    node &amp;&amp;
    node.type === <span class=hljs-string>'CallExpression'</span> &amp;&amp;
    node.callee.type === <span class=hljs-string>'Identifier'</span> &amp;&amp;
    node.callee.name === <span class=hljs-string>'defineComponent'</span>
  )
}
<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> vueJsxPlugin;
</code></pre>
 </div>
</div>
